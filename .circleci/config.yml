version: 2.1

orbs:
  hugo: circleci/hugo@1.3.0
  aws-s3: circleci/aws-s3@3.1.1
  aws-cli: circleci/aws-cli@3.1.4

# installing aws-cli orb as per workaround described here:
# https://github.com/CircleCI-Public/aws-s3-orb/issues/44#issuecomment-1429057191

workflows:
  sample:
    jobs:
      - hugo/build:
          version: "0.48"
          html-proofer: false
          post-steps:
            - run: echo helloworld
            - aws-cli/setup
            - aws-s3/copy:
                install-aws-cli: false
                from: public/
                to: s3://sample-app-vue
                arguments: --recursive
